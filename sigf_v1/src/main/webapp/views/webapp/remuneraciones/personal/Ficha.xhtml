<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="./../templateRemuneraciones.xhtml">

    <ui:define name="content" class="ui-corner-all" >

        <h:form id="TrabajadorCreateForm">

            <p:panel id="datos" widgetVar="datos" header="Datos" >
                <h:panelGrid columns="8" columnClasses="value" id="panelServicio2">                        
                    <p:outputLabel value="Código:" for="busquedaCodigo" style="font-size: 14px;font-weight: bold;text-align: right;padding-left: 10px;"/>
                    <p:inputText id="busquedaCodigo" onfocus="this.setSelectionRange(0, this.value.length)" autocomplete="off" required="true" requiredMessage="Debe Ingresar el Bruto"/>

                    <p:outputLabel value="Rut:" for="busquedaRut" style="font-size: 14px;font-weight: bold;text-align: right;padding-left: 10px;"/>
                    <p:inputText id="busquedaRut" onfocus="this.setSelectionRange(0, this.value.length)" autocomplete="off" required="true" requiredMessage="Debe Ingresar el Bruto"/>

                </h:panelGrid>
            </p:panel>
            <p:separator class="ui-priority-primary" />
            <h:panelGroup id="display" >

                <h:panelGrid columns="2" >                        
                    <p:fieldset legend="Información Personal" style="height: 100%" >
                        <p:panelGrid columns="2" columnClasses="column">
                            <p:outputLabel value="Rut:" for="rutTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="rutTrabajador" value="#{trabajadorController.selected.rutTrabajador}" title="#{bundle.CreateTrabajadorTitle_rutTrabajador}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_rutTrabajador}"/>
                                <p:tooltip for="rutTrabajador" value="#{trabajadorController.getComponentMessages('rutTrabajador', bundle.CreateTrabajadorHelpText_rutTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Nombres" for="nombreTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="nombreTrabajador" value="#{trabajadorController.selected.nombreTrabajador}" title="#{bundle.CreateTrabajadorTitle_nombreTrabajador}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_nombreTrabajador}" size="50"/>
                                <p:tooltip for="nombreTrabajador" value="#{trabajadorController.getComponentMessages('nombreTrabajador', bundle.CreateTrabajadorHelpText_nombreTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Apellido P." for="apellidoPaternoTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="apellidoPaternoTrabajador" value="#{trabajadorController.selected.apellidoPaternoTrabajador}" title="#{bundle.CreateTrabajadorTitle_apellidoPaternoTrabajador}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_apellidoPaternoTrabajador}" size="50"/>
                                <p:tooltip for="apellidoPaternoTrabajador" value="#{trabajadorController.getComponentMessages('apellidoPaternoTrabajador', bundle.CreateTrabajadorHelpText_apellidoPaternoTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Apellido M.:" for="apellidoMaternoTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="apellidoMaternoTrabajador" value="#{trabajadorController.selected.apellidoMaternoTrabajador}" title="#{bundle.CreateTrabajadorTitle_apellidoMaternoTrabajador}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_apellidoMaternoTrabajador}" size="50"/>
                                <p:tooltip for="apellidoMaternoTrabajador" value="#{trabajadorController.getComponentMessages('apellidoMaternoTrabajador', bundle.CreateTrabajadorHelpText_apellidoMaternoTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="F.Nacimiento:" for="fechaNacimientoTrabajador" />
                            <h:panelGroup>
                                <p:calendar id="fechaNacimientoTrabajador" pattern="MM/dd/yyyy" value="#{trabajadorController.selected.fechaNacimientoTrabajador}" title="#{bundle.CreateTrabajadorTitle_fechaNacimientoTrabajador}"  showOn="button"/>
                                <p:tooltip for="fechaNacimientoTrabajador" value="#{trabajadorController.getComponentMessages('fechaNacimientoTrabajador', bundle.CreateTrabajadorHelpText_fechaNacimientoTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="País:" for="nacionalidad" />
                            <h:panelGroup>                                    
                                <p:selectOneRadio id="nacionalidad" value="#{trabajadorController.nacionalidad}" required="true">
                                    <f:selectItem itemLabel="Chile" itemValue="1" />
                                    <f:selectItem itemLabel="Extranjero" itemValue="0" />
                                </p:selectOneRadio>

                                <p:tooltip for="nacionalidad" value="#{trabajadorController.getComponentMessages('nacionalidad', bundle.CreateTrabajadorHelpText_nacionalidad)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Sexo:" for="sexo" />
                            <h:panelGroup>
                                <p:selectOneRadio id="sexo" value="#{trabajadorController.sexo}" required="true">
                                    <f:selectItem itemLabel="Hombre" itemValue="1" />
                                    <f:selectItem itemLabel="Mujer" itemValue="0" />
                                </p:selectOneRadio>                                    
                                <p:tooltip for="sexo" value="#{trabajadorController.getComponentMessages('sexo', bundle.CreateTrabajadorHelpText_sexo)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Dirección:" for="direccionTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="direccionTrabajador" value="#{trabajadorController.selected.direccionTrabajador}" title="#{bundle.CreateTrabajadorTitle_direccionTrabajador}"/>
                                <p:tooltip for="direccionTrabajador" value="#{trabajadorController.getComponentMessages('direccionTrabajador', bundle.CreateTrabajadorHelpText_direccionTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Teléfono:" for="telefonoFijoTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="telefonoFijoTrabajador" value="#{trabajadorController.selected.telefonoFijoTrabajador}" title="#{bundle.CreateTrabajadorTitle_telefonoFijoTrabajador}"/>
                                <p:tooltip for="telefonoFijoTrabajador" value="#{trabajadorController.getComponentMessages('telefonoFijoTrabajador', bundle.CreateTrabajadorHelpText_telefonoFijoTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Celular:" for="celularTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="celularTrabajador" value="#{trabajadorController.selected.celularTrabajador}" title="#{bundle.CreateTrabajadorTitle_celularTrabajador}"/>
                                <p:tooltip for="celularTrabajador" value="#{trabajadorController.getComponentMessages('celularTrabajador', bundle.CreateTrabajadorHelpText_celularTrabajador)}"/>
                            </h:panelGroup>

                            <p:outputLabel value="Email:" for="emailTrabajador" />
                            <h:panelGroup>
                                <p:inputText id="emailTrabajador" value="#{trabajadorController.selected.emailTrabajador}" title="#{bundle.CreateTrabajadorTitle_emailTrabajador}"/>
                                <p:tooltip for="emailTrabajador" value="#{trabajadorController.getComponentMessages('emailTrabajador', bundle.CreateTrabajadorHelpText_emailTrabajador)}"/>
                            </h:panelGroup>

                        </p:panelGrid>

                        <p:outputLabel value="a" style="color: white;font-size:100pt" />
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                        <p:outputLabel value="a" style="color: white;font-size:100pt" />

                    </p:fieldset>

                    <h:panelGrid >
                        <h:panelGrid columns="1" columnClasses="column">

                            <p:fieldset legend="Información Previsional" style="height: 100%">
                                <p:panelGrid columns="2">
                                    <p:outputLabel value="Previsión:" for="institucionPrevision" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="institucionPrevision" value="#{trabajadorController.selected.institucionPrevision}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_institucionPrevision}" converter="institucionPrevisionConverter">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{institucionPrevisionController.items}"
                                                           var="institucionPrevisionItem"
                                                           itemValue="#{institucionPrevisionItem}"
                                                           itemLabel="#{institucionPrevisionItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="institucionPrevision" value="#{trabajadorController.getComponentMessages('institucionPrevision', bundle.CreateTrabajadorHelpText_institucionPrevision)}"/>
                                    </h:panelGroup>

                                    <p:outputLabel value="APV:" for="institucionApv" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="institucionApv" value="#{trabajadorController.selected.institucionApv}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_institucionApv}" converter="institucionApvConverter">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{institucionApvController.items}"
                                                           var="institucionApvItem"
                                                           itemValue="#{institucionApvItem}"
                                                           itemLabel="#{institucionApvItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="institucionApv" value="#{trabajadorController.getComponentMessages('institucionApv', bundle.CreateTrabajadorHelpText_institucionApv)}"/>
                                    </h:panelGroup>

                                    <p:outputLabel value="Método Pago APV:" for="formaPagoApv" />
                                    <h:panelGroup>
                                        <p:selectBooleanCheckbox id="formaPagoApv" value="#{trabajadorController.selected.formaPagoApv}" />
                                        <p:tooltip for="formaPagoApv" value="#{trabajadorController.getComponentMessages('formaPagoApv', bundle.CreateTrabajadorHelpText_formaPagoApv)}"/>
                                    </h:panelGroup>

                                    <p:outputLabel value="Tipo Cotización:" for="formaPagoApv" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="tipoCotizacionTrabajador" value="#{trabajadorController.selected.tipoCotizacionTrabajador}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_tipoCotizacionTrabajador}" converter="tipoCotizacionTrabajadorConverter">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{tipoCotizacionTrabajadorController.items}"
                                                           var="tipoCotizacionTrabajadorItem"
                                                           itemValue="#{tipoCotizacionTrabajadorItem}"
                                                           itemLabel="#{tipoCotizacionTrabajadorItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="tipoCotizacionTrabajador" value="#{trabajadorController.getComponentMessages('tipoCotizacionTrabajador', bundle.CreateTrabajadorHelpText_tipoCotizacionTrabajador)}"/>
                                    </h:panelGroup>
                                </p:panelGrid>

                            </p:fieldset>


                            <p:fieldset legend="Informacion Salud" style="height: 100%">
                                <p:panelGrid columns="2" columnClasses="column">

                                    <p:outputLabel value="Fonasa:" for="fonasa" />                                        
                                    <p:selectBooleanCheckbox id="fonasa" value="#{trabajadorController.fonasa}">
                                        <p:ajax update="institucionSalud, monedaPactadaInstitucionSalud, montoSalud" />
                                    </p:selectBooleanCheckbox>

                                    <p:outputLabel value="Salud:" for="institucionSalud" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="institucionSalud" value="#{trabajadorController.selected.institucionSalud}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_institucionSalud}" converter="institucionSaludConverter" disabled="#{trabajadorController.fonasa}">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{institucionSaludController.items}"
                                                           var="institucionSaludItem"
                                                           itemValue="#{institucionSaludItem}"
                                                           itemLabel="#{institucionSaludItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="institucionSalud" value="#{trabajadorController.getComponentMessages('institucionSalud', bundle.CreateTrabajadorHelpText_institucionSalud)}"/>
                                    </h:panelGroup>

                                    <p:outputLabel value="Moneda:" for="monedaPactadaInstitucionSalud" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="monedaPactadaInstitucionSalud" value="#{trabajadorController.selected.monedaPactadaInstitucionSalud}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_monedaPactadaInstitucionSalud}" converter="monedaPactadaInstitucionSaludConverter" disabled="#{trabajadorController.fonasa}">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{monedaPactadaInstitucionSaludController.items}"
                                                           var="monedaPactadaInstitucionSaludItem"
                                                           itemValue="#{monedaPactadaInstitucionSaludItem}"
                                                           itemLabel="#{monedaPactadaInstitucionSaludItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="monedaPactadaInstitucionSalud" value="#{trabajadorController.getComponentMessages('monedaPactadaInstitucionSalud', bundle.CreateTrabajadorHelpText_monedaPactadaInstitucionSalud)}"/>
                                    </h:panelGroup>

                                    <p:outputLabel value="Monto:" for="montoSalud" />
                                    <h:panelGroup>
                                        <p:inputText id="montoSalud" value="#{trabajadorController.selected.montoSalud}" title="#{bundle.CreateTrabajadorTitle_montoSalud}" disabled="#{trabajadorController.fonasa}"/>
                                        <p:tooltip for="montoSalud" value="#{trabajadorController.getComponentMessages('montoSalud', bundle.CreateTrabajadorHelpText_montoSalud)}"/>
                                    </h:panelGroup>

                                </p:panelGrid>
                            </p:fieldset>


                            <p:fieldset legend="Asignación Familiar" style="height: 100%">
                                <p:panelGrid columns="2" columnClasses="column">

                                    <p:outputLabel value="N° de Cargas" for="numeroCargas" />
                                    <h:panelGroup>
                                        <p:inputText id="numeroCargas" value="#{trabajadorController.selected.numeroCargas}" title="#{bundle.CreateTrabajadorTitle_numeroCargas}" size="20"/>
                                        <p:tooltip for="numeroCargas" value="#{trabajadorController.getComponentMessages('numeroCargas', bundle.CreateTrabajadorHelpText_numeroCargas)}"/>
                                    </h:panelGroup>


                                    <p:outputLabel value="Grupo:" for="grupoAsignacionTrabajador" />
                                    <h:panelGroup>
                                        <p:selectOneMenu id="grupoAsignacionTrabajador" value="#{trabajadorController.selected.asignacionFamiliar}" required="true" requiredMessage="#{bundle.CreateTrabajadorRequiredMessage_grupoAsignacionTrabajador}" converter="asignacionFamiliarConverter">
                                            <f:selectItem itemLabel="#{bundle.SelectOneMessage}"/>
                                            <f:selectItems value="#{asignacionFamiliarController.items}"
                                                           var="grupoAsignacionTrabajadorItem"
                                                           itemValue="#{grupoAsignacionTrabajadorItem}"
                                                           itemLabel="#{grupoAsignacionTrabajadorItem}"
                                                           />

                                        </p:selectOneMenu>
                                        <p:tooltip for="grupoAsignacionTrabajador" value="#{trabajadorController.getComponentMessages('grupoAsignacionTrabajador', bundle.CreateTrabajadorHelpText_grupoAsignacionTrabajador)}"/>
                                    </h:panelGroup>
                                </p:panelGrid>

                            </p:fieldset>

                        </h:panelGrid>
                    </h:panelGrid>

                </h:panelGrid>


                <p:commandButton actionListener="#{trabajadorController.saveNew}" value="#{bundle.Save}" update="display,:growl" oncomplete="handleSubmit(xhr,status,args,PF('TrabajadorCreateDialog'));">
                    <p:confirm header="#{bundle.ConfirmationHeader}" message="#{bundle.ConfirmCreateMessage}" icon="ui-icon-alert"/>
                </p:commandButton>

                <p:commandButton value="#{bundle.Cancel}" oncomplete="PF('TrabajadorCreateDialog').hide()" update="display" process="@this" immediate="true" resetValues="true"/>
            </h:panelGroup>

        </h:form>

    </ui:define>

</ui:composition>